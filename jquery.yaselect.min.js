jQuery.fn.yaselect=function(d){d=d||{};return this.each(function(n,f){var g=d.tag||"span",a=jQuery(f).css({position:"absolute"}).addClass("yaselect-select"),c=jQuery("<"+g+' class="yaselect-wrap yaselect-open" tabindex="0"><'+g+' class="yaselect-current"></'+g+"></"+g+">"),i=c.find(".yaselect-current").text(f.value),j=function(){return a.find("option:nth("+(f.selectedIndex||0)+")").text()},k=function(b){a.blur();i.text(j());b&&c.focus()};a.anchor_to_wrapper=function(b){var h=c.wrap('<div style="display:inline;border:0;padding:0;margin:0;"></div>').parent(),
e=h.offset(),l=h.height();h={left:e.left+(d.leftOffset||0)};var m={height:l,top:e.top+(d.topOffset||0)};e={top:e.top+l+(d.topOffset||0)};c.unwrap();return this.css(h).css(b?m:e)};if(d.hoverOnly||window.navigator&&navigator.userAgent.match(/iphone|ipod|ipad/i))return a.before(c.toggleClass("yaselect-open yaselect-close")).css({opacity:0.0010}).change(function(){i.text(j())}).anchor_to_wrapper("anchor to top");a.before(c).keydown(function(b){if(b.which==13||b.which==32){b.preventDefault();k(true)}}).change(function(){i.text(j())}).blur(function(){a.hide();
c.toggleClass("yaselect-open yaselect-close")}).click(function(){if(a.is(":hidden")){c.toggleClass("yaselect-open yaselect-close");a.show().anchor_to_wrapper();setTimeout(function(){a.focus()})}else k(true)});c.mousedown(function(){a.click()}).keydown(function(b){if(b.which!=9){b.preventDefault();a.click()}});f.size=d.size||5;k()})};
