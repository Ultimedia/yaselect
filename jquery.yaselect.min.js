jQuery.fn.yaselect=function(d){d=d||{};return this.each(function(n,f){var g=d.tag||"span",a=jQuery(f).css({position:"absolute"}).addClass("yaselect-select"),b=jQuery("<"+g+' class="yaselect-wrap yaselect-open" tabindex="0"><'+g+' class="yaselect-current"></'+g+"></"+g+">"),i=b.find(".yaselect-current").text(f.value),j=function(){return a.find("option:nth("+(f.selectedIndex||0)+")").text()},k=function(c){a.blur();i.text(j());c&&b.focus()};a.anchor_to_wrapper=function(c){var h=b.wrap('<div style="display:inline;border:0;padding:0;margin:0;"></div>').parent(),
e=h.offset(),l=h.height();h={left:e.left+(d.leftOffset||0)};var m={height:l,top:e.top+(d.topOffset||0)};e={top:e.top+l+(d.topOffset||0)};b.unwrap();return this.css(h).css(c?m:e)};if(d.hoverOnly||window.navigator&&navigator.userAgent.match(/iphone|ipod|ipad/i)){a.parents("form").submit(function(){a.appendTo(b)});return a.before(b.toggleClass("yaselect-open yaselect-close")).css({opacity:0.0010}).change(function(){i.text(j())}).anchor_to_wrapper("anchor to top").appendTo(document.body)}a.before(b).appendTo(b).keydown(function(c){if(c.which==
13||c.which==32){c.preventDefault();k(true)}}).change(function(){i.text(j())}).blur(function(){a.hide();b.toggleClass("yaselect-open yaselect-close");setTimeout(function(){a.appendTo(b)})}).click(function(){if(a.is(":hidden")){b.toggleClass("yaselect-open yaselect-close");a.show().anchor_to_wrapper().appendTo(document.body);setTimeout(function(){a.focus()})}else k(true)});b.mousedown(function(){a.click()}).keydown(function(c){if(c.which!=9){c.preventDefault();a.click()}});f.size=d.size||5;k()})};
